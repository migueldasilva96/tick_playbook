---
- hosts: localhost
  gather_facts: no
  vars_prompt:
  - name: target_host
    prompt: "INSIRA O ENDEREÇO IP DO HOST DE DESTINO"
    private: no
  tasks:
    - add_host:
        name: "{{ target_host }}"
        groups: dynamically_created_hosts

- hosts: dynamically_created_hosts
  become: true
  vars_prompt:
    - name: influxdb_host
      private: no
      prompt: "INSIRA O ENDEREÇO DO HOST DO INLUXDB (Ex.: 192.168.0.1)"
    - name: influxdb_database
      private: no
      prompt: "INSIRA O NOME DA BASE DE DADOS DE DESTINO:"
    - name: influxdb_user
      private: yes
      prompt: "INSIRA O NOME DE UTILIZADOR DA BASE DE DADOS:"
    - name: influxdb_password
      private: yes
      prompt: "INSIRA A PASSWORD DO UTILIZADOR:"
  roles:
    - telegraf
