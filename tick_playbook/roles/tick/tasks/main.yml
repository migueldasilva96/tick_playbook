- name: <.<.<.<.<.<.<.<.<.< INFLUXDB VOLUMES >.>.>.>.>.>.>.>.>.>
  shell: docker volume create --name influxdb_storage | docker volume create --name influxdb_data

- name: "<.<.<.<.<.<.<.<.<.< INFLUXDB CONTAINER >.>.>.>.>.>.>.>.>.>"
  docker:
    name: tick_influxdb
    image: influxdb:latest
    state: started
    ports:
    - "8086:8086"
    - "8086:8086/udp"
    env:
        INFLUXDB_DB="db0"
        INFLUXDB_ADMIN_ENABLED="true"
        INFLUXDB_ADMIN_USER="admin"
        INFLUXDB_ADMIN_PASSWORD="it1234"
        INFLUXDB_USER="telegraf"
        INFLUXDB_USER_PASSWORD="telegraf"
    volumes:
      - influxdb_storage:/var/lib/influxdb
      - influxdb_data:/etc/influxdb

- name: <.<.<.<.<.<.<.<.<.< GRAFANA VOLUMES >.>.>.>.>.>.>.>.>.>
  shell: docker volume create --name grafana_storage | docker volume create --name grafana_data

- name: "<.<.<.<.<.<.<.<.<.< GRAFANA CONTAINER >.>.>.>.>.>.>.>.>.>"
  docker:
    name: tick_grafana
    image: grafana/grafana:latest
    state: started
    ports:
    - "3000:3000"
    volumes:
    - grafana_storage:/var/lib/grafana
    - grafana_data:/etc/grafana

- name: <.<.<.<.<.<.<.<.<.< KAPACITOR VOLUMES >.>.>.>.>.>.>.>.>.>
  shell: docker volume create --name kapacitor_data | docker volume create --name kapacitor_storage

- name: "<.<.<.<.<.<.<.<.<.< KAPACITOR CONTAINER >.>.>.>.>.>.>.>.>.>"
  docker:
    name: tick_kapacitor
    image: kapacitor:latest
    state: started
    restart_policy: always
    ports:
    - "9092:9092"
    volumes:
    - kapacitor_data:/etc/kapacitor
    - kapacitor_storage:/var/lib/kapacitor

- name: <.<.<.<.<.<.<.<.<.< CHRONOGRAF VOLUMES >.>.>.>.>.>.>.>.>.>
  shell: docker volume create --name chronograf_storage | docker volume create --name chronograf_data

- name: "<.<.<.<.<.<.<.<.<.< CHRONOGRAF CONTAINER >.>.>.>.>.>.>.>.>.>"
  docker:
    name: tick_chronograf
    image: chronograf:latest
    state: started
    restart_policy: always
    ports:
    - "8888:8888"
    volumes:
    - chronograf_data:/etc/chronograf
    - chronograf_storage:/var/lib/chronograf
    command: --influxdb-url=http://192.168.85.147:8086
